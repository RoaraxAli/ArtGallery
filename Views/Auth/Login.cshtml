@{
    ViewData["Title"] = "Welcome";
    Layout = "_AuthLayout";
    bool showRegister = ViewBag.ShowRegister ?? false;
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<div class="flex items-center justify-center flex-col animate-fade-in">
    <div class="relative overflow-hidden w-[900px] max-w-full min-h-[600px] glass-morphism rounded-[3rem] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.8)] border border-white/10" id="container">
        
        <div class="form-container sign-up-container absolute top-0 h-full transition-all duration-700 ease-in-out left-0 w-full md:w-1/2 opacity-0 z-0">
            <form asp-action="Register" method="post" class="bg-transparent backdrop-blur-3xl flex flex-col items-center justify-center h-full px-12 text-center">

                <h1 class="font-bold text-3xl mb-6 text-[var(--text-primary)]">Create Account</h1>
                <div class="social-container flex gap-4 mb-6">
                    <a asp-action="GithubLogin" class="border border-[var(--glass-border)] rounded-full w-10 h-10 flex items-center justify-center hover:bg-[var(--bg-surface-2)] transition-colors"><i class="bi bi-github text-[var(--text-secondary)]"></i></a>
                    <a asp-action="GoogleLogin" class="border border-[var(--glass-border)] rounded-full w-10 h-10 flex items-center justify-center hover:bg-[var(--bg-surface-2)] transition-colors"><i class="bi bi-google text-[var(--text-secondary)]"></i></a>
                    <a asp-action="DiscordLogin" class="border border-[var(--glass-border)] rounded-full w-10 h-10 flex items-center justify-center hover:bg-[var(--bg-surface-2)] transition-colors"><i class="bi bi-discord text-[var(--text-secondary)]"></i></a>
                </div>
                <span class="text-sm text-[var(--text-secondary)] mb-4">or use your email for registration</span>
                
                <input type="text" name="Name" placeholder="Username" class="bg-[var(--bg-surface-1)] text-[var(--text-primary)] placeholder-slate-500 border border-[var(--glass-border)] px-4 py-3 my-2 w-full rounded-lg outline-none focus:border-primary transition-all" required />
                <input type="email" name="Email" placeholder="Email" class="bg-[var(--bg-surface-1)] text-[var(--text-primary)] placeholder-slate-500 border border-[var(--glass-border)] px-4 py-3 my-2 w-full rounded-lg outline-none focus:border-primary transition-all" required />
                <div class="relative w-full my-2">
                    <input type="password" id="RegPassword" name="Password" placeholder="Password" class="bg-[var(--bg-surface-1)] text-[var(--text-primary)] placeholder-slate-500 border border-[var(--glass-border)] px-4 py-3 w-full rounded-lg outline-none focus:border-primary transition-all" required />
                    <span class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer" onclick="togglePassword('RegPassword', 'regPassIcon')">
                        <i class="bi bi-eye-slash text-[var(--text-secondary)]" id="regPassIcon"></i>
                    </span>
                </div>
                
                <button type="submit" class="mt-4 rounded-full border border-[var(--primary-color)] bg-[var(--primary-color)] text-white text-xs font-bold py-3 px-12 tracking-wider full-uppercase transition-transform active:scale-95 focus:outline-none hover:opacity-90 shadow-lg shadow-primary/25">SIGN UP</button>
                
                <div class="mt-4 md:hidden">
                    <span class="text-sm text-gray-500">Already have an account?</span>
                    <a href="javascript:void(0);" onclick="activateSignIn()" class="text-blue-500 font-bold text-sm hover:underline ml-1">Sign In</a>
                </div>
            </form>
        </div>

        <div class="form-container sign-in-container absolute top-0 h-full transition-all duration-700 ease-in-out left-0 w-full md:w-1/2 z-10 opacity-100">
            <form asp-action="Login" method="post" class="bg-transparent backdrop-blur-3xl flex flex-col items-center justify-center h-full px-12 text-center">

                <h1 class="font-bold text-3xl mb-6 text-[var(--text-primary)]">Sign in</h1>
                <div class="social-container flex gap-4 mb-6">
                    <a asp-action="GithubLogin" class="border border-[var(--glass-border)] rounded-full w-10 h-10 flex items-center justify-center hover:bg-[var(--bg-surface-2)] transition-colors"><i class="bi bi-github text-[var(--text-secondary)]"></i></a>
                    <a asp-action="GoogleLogin" class="border border-[var(--glass-border)] rounded-full w-10 h-10 flex items-center justify-center hover:bg-[var(--bg-surface-2)] transition-colors"><i class="bi bi-google text-[var(--text-secondary)]"></i></a>
                    <a asp-action="DiscordLogin" class="border border-[var(--glass-border)] rounded-full w-10 h-10 flex items-center justify-center hover:bg-[var(--bg-surface-2)] transition-colors"><i class="bi bi-discord text-[var(--text-secondary)]"></i></a>
                </div>
                <span class="text-sm text-[var(--text-secondary)] mb-4">or use your account</span>
                
                <input type="text" name="email" placeholder="Email" class="bg-[var(--bg-surface-1)] text-[var(--text-primary)] placeholder-slate-500 border border-[var(--glass-border)] px-4 py-3 my-2 w-full rounded-lg outline-none focus:border-primary transition-all" required />
                <div class="relative w-full my-2">
                    <input type="password" id="LoginPassword" name="pass" placeholder="Password" class="bg-[var(--bg-surface-1)] text-[var(--text-primary)] placeholder-slate-500 border border-[var(--glass-border)] px-4 py-3 w-full rounded-lg outline-none focus:border-primary transition-all" required />
                    <span class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer" onclick="togglePassword('LoginPassword', 'loginPassIcon')">
                        <i class="bi bi-eye-slash text-[var(--text-secondary)]" id="loginPassIcon"></i>
                    </span>
                </div>
                
                @if(ViewBag.Error != null)
                {
                    <div class="text-red-500 text-xs mt-2">@ViewBag.Error</div>
                }

                <a asp-action="ForgotPassword" class="text-[var(--text-secondary)] text-sm no-underline my-4 hover:text-[var(--primary-color)] transition-colors">Forgot your password?</a>
                <button type="submit" class="rounded-full border border-[var(--primary-color)] bg-[var(--primary-color)] text-white text-xs font-bold py-3 px-12 tracking-wider full-uppercase transition-transform active:scale-95 focus:outline-none hover:opacity-90 shadow-lg shadow-primary/25">SIGN IN</button>
                
                <div class="mt-4 md:hidden">
                    <span class="text-sm text-gray-500">Don't have an account?</span>
                    <a href="javascript:void(0);" onclick="activateSignUp()" class="text-blue-500 font-bold text-sm hover:underline ml-1">Sign Up</a>
                </div>
            </form>
        </div>

        <div class="overlay-container hidden md:block absolute top-0 left-1/2 w-1/2 h-full overflow-hidden transition-transform duration-700 ease-in-out z-50">
            <div class="overlay bg-transparent bg-no-repeat bg-cover text-white relative left-[-100%] h-full w-[200%] transform transition-transform duration-700 ease-in-out border-l border-white/10">
                
                <div class="overlay-panel overlay-left absolute flex flex-col items-center justify-center w-1/2 h-full top-0 left-0 transform -translate-x-[20%] transition-transform duration-700 ease-in-out px-10 text-center bg-white/5 backdrop-blur-3xl">
                    <h1 class="font-bold text-3xl mb-4 text-[var(--text-primary)] tracking-tighter uppercase font-black">Welcome Back!</h1>
                    <p class="text-sm border-b border-white/5 pb-6 mb-8 text-[var(--text-secondary)]">To keep connected with us please login with your personal info</p>
                    <button class="ghost rounded-full border border-white/20 bg-white/5 text-[var(--text-primary)] text-[10px] font-black tracking-widest uppercase py-4 px-12 transition-all hover:bg-[var(--primary-color)] hover:border-[var(--primary-color)] active:scale-95 focus:outline-none" id="signIn">SIGN IN</button>
                </div>

                
                <div class="overlay-panel overlay-right absolute flex flex-col items-center justify-center w-1/2 h-full top-0 right-0 transform translate-x-0 transition-transform duration-700 ease-in-out px-10 text-center bg-white/5 backdrop-blur-3xl">
                    <h1 class="font-bold text-3xl mb-4 text-[var(--text-primary)] tracking-tighter uppercase font-black">Hello, Friend!</h1>
                    <p class="text-sm border-b border-white/5 pb-6 mb-8 text-[var(--text-secondary)]">Enter your personal details and start journey with us</p>
                    <button class="ghost rounded-full border border-white/20 bg-white/5 text-[var(--text-primary)] text-[10px] font-black tracking-widest uppercase py-4 px-12 transition-all hover:bg-[var(--primary-color)] hover:border-[var(--primary-color)] active:scale-95 focus:outline-none" id="signUp">SIGN UP</button>
                </div>

            </div>
        </div>

    </div>
</div>

<style>
    .container-active .sign-up-container {
        transform: translateX(100%);
    }
    @@media (max-width: 768px) {
        .container-active .sign-up-container {
            transform: none !important;
        }
    }
    
    .container-active .sign-in-container {
        transform: translateX(100%);
    }
    @@media (max-width: 768px) {
        .container-active .sign-in-container {
            transform: none !important;
        }
    }
    
    .container-active .overlay-container {
        transform: translateX(-100%);
        z-index: 30;
    }
    
    .overlay-container {
        z-index: 40;
    }

    .container-active .overlay {
        transform: translateX(50%);
    }
    
    .container-active .overlay-left {
        transform: translateX(0);
    }
    
    .container-active .overlay-right {
        transform: translateX(20%);
    }
</style>

<script>
    const container = document.getElementById('container');
    const signUpBtn = document.getElementById('signUp');
    const signInBtn = document.getElementById('signIn');
    
    const signUpContainer = document.querySelector('.sign-up-container');
    const signInContainer = document.querySelector('.sign-in-container');

    function togglePassword(inputId, iconId) {
        const passwordInput = document.getElementById(inputId);
        const icon = document.getElementById(iconId);
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.classList.remove('bi-eye-slash');
            icon.classList.add('bi-eye');
        } else {
            passwordInput.type = 'password';
            icon.classList.remove('bi-eye');
            icon.classList.add('bi-eye-slash');
        }
    }

    function activateSignUp() {
        container.classList.add("container-active");
        
        signUpContainer.classList.remove('z-0', 'opacity-0');
        signUpContainer.classList.add('z-20', 'opacity-100');
        
        signInContainer.classList.remove('z-10', 'opacity-100');
        signInContainer.classList.add('z-0', 'opacity-0');
    }

    function activateSignIn() {
        container.classList.remove("container-active");
        
        signUpContainer.classList.remove('z-20', 'opacity-100');
        signUpContainer.classList.add('z-0', 'opacity-0');
        
        signInContainer.classList.remove('z-0', 'opacity-0');
        signInContainer.classList.add('z-10', 'opacity-100');
    }

    @if(showRegister) {
        <text>
            activateSignUp();
        </text>
    }

    signUpBtn.addEventListener('click', () => {
        activateSignUp();
    });

    signInBtn.addEventListener('click', () => {
        activateSignIn();
    });
</script>